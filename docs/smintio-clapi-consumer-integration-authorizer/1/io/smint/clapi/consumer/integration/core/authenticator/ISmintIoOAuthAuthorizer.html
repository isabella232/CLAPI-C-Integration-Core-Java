<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ISmintIoOAuthAuthorizer (smintio-clapi-consumer-integration-authorizer 1.9.3 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: io.smint.clapi.consumer.integration.core.authenticator, interface: ISmintIoOAuthAuthorizer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ISmintIoOAuthAuthorizer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.smint.clapi.consumer.integration.core.authenticator</a></div>
<h1 title="Interface ISmintIoOAuthAuthorizer" class="title">Interface ISmintIoOAuthAuthorizer</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code>io.smint.clapi.consumer.integration.core.authenticator.ISmintIoAuthenticator</code></dd>
</dl>
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="impl/SmintIoOAuthAuthorizer.html" title="class in io.smint.clapi.consumer.integration.core.authenticator.impl">SmintIoOAuthAuthorizer</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">ISmintIoOAuthAuthorizer</span><span class="extends-implements">
extends io.smint.clapi.consumer.integration.core.authenticator.ISmintIoAuthenticator</span></div>
<div class="block">Authenticator to create OAuth authorization token with Smint.io API.

 <p>
 A generic authenticator to authorize access to the Smint.io API, which uses OAuth 2.0. Smint.io API uses
 <a href="https://identityserver.io/">Identity Server</a> as server part to provide OAuth 2.0 authorization scheme.
 </p>

 <p>
 Smint.io provides an OpenID auto-detection configuration URL for each tenant installation, which can be used to read
 the OAuth 2.0 end points. This URL can be used to detect the end points and configure the authorizer.
 </p>

 <pre>
     https://{tenantID}.smint.io/.well-known/openid-configuration
     https://demo.smint.io/.well-known/openid-configuration
 </pre>

 <p>
 OAuth 2.0 authorization involves user interaction. So, only the initial call to the Smint.io API can be made by the
 authorizer, to request authorization. The OAuth service then will provide an URL the user must open in the browser in
 order to authorize this library manually. Then the server will redirect to a local URL, where a listener receives
 authorization data as URL parameters, which need to be passed to the function
 <a href="#analyzeReceivedAuthorizationData(java.util.Map)"><code>analyzeReceivedAuthorizationData(Map)</code></a>. The data will then be evaluated and a request token fetched from the
 Smint.io API to finish OAuth authorization cycle.
 </p>

 <p>
 The local URL the OAuth service need to redirect to - in order to pass the OAuth authorization data - is retrieved
 from <code>ISettingsModel.getOAuthLocalUrlReceivingAccessData()</code>
 </p>

 <p>
 A listener on an address reachable by the user's browser, need to be in place. This listener must read all URL data
 and pass these to <a href="#analyzeReceivedAuthorizationData(java.util.Map)"><code>analyzeReceivedAuthorizationData(Map)</code></a>. Utilizing a servlet, the parameters are available
 calling <a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletRequest.html#getParameterMap--"><code>javax.servlet.http.HttpServletRequest#getParameterMap()</code></a>. Hence such a listener might look like this,
 fetching the Smint.io instances from global scope, somehow.
 </p>

 <pre>
 package test;

 import java.io.IOException;

 import javax.servlet.ServletException;
 import javax.servlet.http.HttpServlet;
 import javax.servlet.http.HttpServletRequest;
 import javax.servlet.http.HttpServletResponse;

 import test.Global;


 public class ReceiveOAuthDataFromServiceViaBrowser extends HttpServlet {

     protected void doGet(HttpServletRequest request, HttpServletResponse response)
         throws ServletException, IOException {

         final Map&lt;String, String[]&gt; authParameters = request.getParameterMap();

         boolean isAuthDataConsumed = false;
         for (final ISmintIoOAuthAuthorizer authorizer : Global.getSmintIoAuthorizers()) {
             if (authorizer.isTargetOfReceivedAuthorizationData(authParameters)) {
                 isAuthDataConsumed = true;
                 authorizer.analyzeAuthorizationData(authParameters);
                 break;
             }
         }

         if (!isAuthDataConsumed) {
             throw new SmintIoAuthenticatorException("Invalid URL parameters - no authenticator target found!");
         }
     }

 }
 </pre>

 <p>
 Beware, that the same instance of <code>ISmintIoOAuthAuthorizer</code> must be used to analyze the received URL
 parameters, as the instance needs to cached some data, that is necessary to fulfill the authorization process.
 Therefore, the same instance need to be passed somehow to the servlet, receiving the URL data.
 </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#SMINTIO_OAUTH_SCOPE" class="member-name-link">SMINTIO_OAUTH_SCOPE</a></code></div>
<div class="col-last even-row-color">
<div class="block">The scope to use with OAuth to authorize for synchronization with Smint.io API.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="ISmintIoOAuthAuthorizer.html" title="interface in io.smint.clapi.consumer.integration.core.authenticator">ISmintIoOAuthAuthorizer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#analyzeReceivedAuthorizationData(java.util.Map)" class="member-name-link">analyzeReceivedAuthorizationData</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]&gt;&nbsp;urlParameters)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Received and evaluates the authorization data sent from the server to a redirect URL.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/net/URL.html" title="class or interface in java.net" class="external-link">URL</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#createAuthorizationUrl()" class="member-name-link">createAuthorizationUrl</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Connects to the Smint.io API, requests authorization and returns the URL, the user must open in the browser.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isTargetOfReceivedAuthorizationData(java.util.Map)" class="member-name-link">isTargetOfReceivedAuthorizationData</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]&gt;&nbsp;urlParameters)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Checks the authorization data sent from the server if these are targeted to this instance.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.smint.clapi.consumer.integration.core.authenticator.ISmintIoAuthenticator">Methods inherited from interface&nbsp;io.smint.clapi.consumer.integration.core.authenticator.ISmintIoAuthenticator</h3>
<code>refreshSmintIoToken</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="SMINTIO_OAUTH_SCOPE">
<h3>SMINTIO_OAUTH_SCOPE</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">SMINTIO_OAUTH_SCOPE</span></div>
<div class="block">The scope to use with OAuth to authorize for synchronization with Smint.io API.

 <pre>
 <code>SMINTIO_OAUTH_SCOPE = </code>"smintio.full openid profile offline_access"
 </pre></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../../../constant-values.html#io.smint.clapi.consumer.integration.core.authenticator.ISmintIoOAuthAuthorizer.SMINTIO_OAUTH_SCOPE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="createAuthorizationUrl()">
<h3>createAuthorizationUrl</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/net/URL.html" title="class or interface in java.net" class="external-link">URL</a></span>&nbsp;<span class="element-name">createAuthorizationUrl</span>()
                    throws <span class="exceptions">io.smint.clapi.consumer.integration.core.exceptions.SmintIoAuthenticatorException</span></div>
<div class="block">Connects to the Smint.io API, requests authorization and returns the URL, the user must open in the browser.

 <p>
 Implementing classes will need an instance to <code>ISettingsModel</code> to get all required data for OAuth
 authorization.
 </p>

 <p>
 The returned URL is used to manually authorize this application with the Smint.io API by the user. It must be
 opened in a user's browser.
 </p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A valid URL to display to the user, which need to open it in the browser.</dd>
<dt>Throws:</dt>
<dd><code>io.smint.clapi.consumer.integration.core.exceptions.SmintIoAuthenticatorException</code> - in case no client ID or client secret are available, invalid, have expired
                                       or the Smint.io API rejected the authorization request, or network is down
                                       and the Smint.io API service can not be reached.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="analyzeReceivedAuthorizationData(java.util.Map)">
<h3>analyzeReceivedAuthorizationData</h3>
<div class="member-signature"><span class="return-type"><a href="ISmintIoOAuthAuthorizer.html" title="interface in io.smint.clapi.consumer.integration.core.authenticator">ISmintIoOAuthAuthorizer</a></span>&nbsp;<span class="element-name">analyzeReceivedAuthorizationData</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]&gt;&nbsp;urlParameters)</span>
                                                  throws <span class="exceptions">io.smint.clapi.consumer.integration.core.exceptions.SmintIoAuthenticatorException</span></div>
<div class="block">Received and evaluates the authorization data sent from the server to a redirect URL.

 <p>
 OAuth 2.0 authorization involves user interaction. So, only the initial call to the Smint.io API can be made by
 the authorizer, to request authorization. The OAuth service then will provide an URL the user must open in the
 browser in order to authorize this library manually. Then the server will redirect to a local URL, where a
 listener receives authorization data, that need to be passed to this function. The data will then be evaluated
 and a request token fetched from the Smint.io API.
 </p>

 <p>
 The URL any OAuth service will redirect to - after successful authorization - contains required URL parameters.
 These parameters need to be passed to this function.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>urlParameters</code> - the parameters received by the redirection URL listener. Using servlets, the parameters can
                      be easily fetched by using <a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/http/HttpServletRequest.html"><code>javax.servlet.http.HttpServletRequest#getParameterMap()</code></a>.</dd>
<dt>Returns:</dt>
<dd>A valid URL to display to the user, which need to open it in the browser.</dd>
<dt>Throws:</dt>
<dd><code>io.smint.clapi.consumer.integration.core.exceptions.SmintIoAuthenticatorException</code> - in case no client ID or client secret are available, invalid, have expired
                                       or the Smint.io API rejected the authorization request, or network is down
                                       and the Smint.io API service can not be reached.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isTargetOfReceivedAuthorizationData(java.util.Map)">
<h3>isTargetOfReceivedAuthorizationData</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isTargetOfReceivedAuthorizationData</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]&gt;&nbsp;urlParameters)</span></div>
<div class="block">Checks the authorization data sent from the server if these are targeted to this instance.

 <p>
 OAuth 2.0 authorization involves user interaction. So, only the initial call to the Smint.io API can be made by
 the authorizer, to request authorization. The OAuth service then will provide an URL the user must open in the
 browser in order to authorize this library manually. Then the server will redirect to a local URL, where a
 listener receives authorization data, that need to be passed to this function. The data will then be evaluated
 and a request token fetched from the Smint.io API.
 </p>

 <p>
 The URL any OAuth service will redirect to - after successful authorization - contains required URL parameters.
 As there might be some more authorizations are currently in progress, this check can be used, whether the
 received URL parameters are targeted at this instance. Each OAuth authorization progress to Smint.io relies on
 instances of this class. So multiple instances might be used in global scope to be passed to the same servlet
 receiving the authorization data. The servlet must use some lookup method to check, which instance is waiting for
 the authorization data. In case no instance is the target for such data, the servlet must fail with an
 authorization exception.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>urlParameters</code> - the parameters received by the redirection URL listener. Using servlets, the parameters can
                      be easily fetched by using <a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/http/HttpServletRequest.html"><code>javax.servlet.http.HttpServletRequest#getParameterMap()</code></a>.</dd>
<dt>Returns:</dt>
<dd>A valid URL to display to the user, which need to open it in the browser.</dd>
<dt>Throws:</dt>
<dd><code>io.smint.clapi.consumer.integration.core.exceptions.SmintIoAuthenticatorException</code> - in case no client ID or client secret are available, invalid, have expired
                                       or the Smint.io API rejected the authorization request, or network is down
                                       and the Smint.io API service can not be reached.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
